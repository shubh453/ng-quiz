<div class="component-container">
  <ng-container *ngIf="!questionnaire.isComplete && (currentQuiz$ | async) as quiz">
    <mat-card>
      <mat-card-header class="card-header">
        <quiz-timer [info]="timerInfo" (onComplete)="completeTimer($event)"></quiz-timer>
        <button
          class="submit-button"
          type="submit"
          mat-raised-button
          (click)="submitAnswers()"
        >
          Submit
        </button>
      </mat-card-header>
      <mat-card-content>
        <quiz-stepper
          [clickable]="true"
          (stepChange)="updateCurrentQuiz($event)"
          [steps]="(steps$ | async)!"
        >
          <div class="content">
            <quiz-card
              [quiz]="quiz"
              [selectedAnswers]="(currentSelectedAnswers$ | async)!"
              (onChoiceMade)="saveAnswer($event)"
            ></quiz-card>
          </div>
        </quiz-stepper>
      </mat-card-content>
    </mat-card>
  </ng-container>
  <ng-container *ngIf="questionnaire.isComplete">
    <quiz-result
      [result]="result$ | async"
      [quizzes]="quizzes$ | async"
      [completedOn]="completedDate"
      [completionTime]="timerTime"
      (onRetake)="retakeTest()"
    ></quiz-result>
  </ng-container>
</div>
